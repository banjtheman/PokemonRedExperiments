import base64
from io import BytesIO

from PIL import Image


def base64_to_image(base64_string):
    # Decode the base64 string
    decoded_data = base64.b64decode(base64_string)

    # Create a BytesIO object from the decoded data
    image_data = BytesIO(decoded_data)

    # Open the image using PIL
    image = Image.open(image_data)

    return image


# Example usage
base64_string = "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"

image = base64_to_image(base64_string)
# image.show()  # Display the image
image.save("test_image.png")  # Optionally, save the image to a file
